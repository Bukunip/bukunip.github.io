<!DOCTYPE html>
<html>
<head>
  <title>Sliding Puzzle</title>
  <style>
    body { text-align:center; font-family:Arial; }
    .grid {
      width:300px;
      height:300px;
      margin:20px auto;
      display:grid;
      grid-template-columns:repeat(3,1fr);
      grid-template-rows:repeat(3,1fr);
      gap:2px;
    }
    .tile {
      background-size:300px 300px;
      cursor:pointer;
    }
    .empty {
      background:none;
    }
    button { margin:5px; padding:8px 15px; }
  </style>
</head>
<body>

<button onclick="goBack()">⬅ Back</button>
<button onclick="prevImage()">⬅ Prev</button>
<button onclick="nextImage()">Next ➡</button>

<h3>Sliding Puzzle</h3>
<div class="grid" id="puzzle"></div>

<script>

const images = [
"pelacur-berjilbab-hunaifatul-azizah-aini.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-1.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-2.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-3.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-4.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-5.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-6.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-7.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-8.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-9.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-10.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-11.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-12.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-13.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-14.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-15.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-16.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-17.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-18.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-19.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-20.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-21.jpg"
];

const urlParams = new URLSearchParams(window.location.search);
let index = parseInt(urlParams.get("index"));
if (isNaN(index) || index < 0 || index >= images.length) index = 0;

const puzzle = document.getElementById("puzzle");
let emptyIndex;
let positions = [];

function initPuzzle() {
  puzzle.innerHTML = "";
  positions = [];
  emptyIndex = 8;

  for (let i = 0; i < 9; i++) {
    positions.push(i);
  }

  shuffle();

  render();
}

function render() {
  puzzle.innerHTML = "";

  for (let i = 0; i < 9; i++) {
    const tile = document.createElement("div");
    tile.classList.add("tile");

    if (positions[i] === 8) {
      tile.classList.add("empty");
      emptyIndex = i;
    } else {
      let x = (positions[i] % 3) * -100;
      let y = Math.floor(positions[i] / 3) * -100;
      tile.style.backgroundImage = "url(images/" + images[index] + ")";
      tile.style.backgroundPosition = x + "px " + y + "px";
    }

    tile.onclick = () => moveTile(i);
    puzzle.appendChild(tile);
  }
}

function moveTile(i) {
  const row = Math.floor(i / 3);
  const col = i % 3;
  const emptyRow = Math.floor(emptyIndex / 3);
  const emptyCol = emptyIndex % 3;

  const isAdjacent =
    (row === emptyRow && Math.abs(col - emptyCol) === 1) ||
    (col === emptyCol && Math.abs(row - emptyRow) === 1);

  if (isAdjacent) {
    [positions[i], positions[emptyIndex]] =
    [positions[emptyIndex], positions[i]];
    render();
  }
}

function shuffle() {
  for (let i = 0; i < 200; i++) {
    const rand = Math.floor(Math.random() * 9);
    moveTile(rand);
  }
}

function nextImage() {
  index = (index + 1) % images.length;
  window.location.href = "puzzle.html?index=" + index;
}

function prevImage() {
  index = (index - 1 + images.length) % images.length;
  window.location.href = "puzzle.html?index=" + index;
}

function goBack() {
  window.location.href = "index.html";
}

initPuzzle();

</script>
</body>
</html>
