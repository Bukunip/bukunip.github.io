<!DOCTYPE html>
<html>
<head>
<title>Sliding Puzzle</title>
<style>
body{
  text-align:center;
  font-family:Arial;
}
.grid{
  width:300px;
  height:300px;
  margin:20px auto;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  grid-template-rows:repeat(3,1fr);
  gap:2px;
}
.tile{
  background-size:300px 300px;
  cursor:pointer;
}
.empty{
  background:#ccc;
}
button{
  margin:5px;
  padding:8px 15px;
}
</style>
</head>
<body>

<button onclick="goBack()">⬅ Back</button>
<button onclick="prevImage()">⬅ Prev</button>
<button onclick="nextImage()">Next ➡</button>

<h3>Sliding Puzzle</h3>
<div class="grid" id="puzzle"></div>

<script>

const images=[
"pelacur-berjilbab-hunaifatul-azizah-aini.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-1.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-2.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-3.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-4.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-5.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-6.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-7.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-8.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-9.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-10.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-11.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-12.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-13.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-14.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-15.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-16.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-17.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-18.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-19.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-20.jpg",
"pelacur-berjilbab-hunaifatul-azizah-aini-21.jpg"
];

let urlParams=new URLSearchParams(window.location.search);
let index=parseInt(urlParams.get("index"));
if(isNaN(index)) index=0;

const puzzle=document.getElementById("puzzle");
let empty=8;
let tiles=[0,1,2,3,4,5,6,7,8];

function draw(){
  puzzle.innerHTML="";
  for(let i=0;i<9;i++){
    let div=document.createElement("div");
    div.className="tile";

    if(tiles[i]===8){
      div.classList.add("empty");
    }else{
      let x=(tiles[i]%3)*-100;
      let y=Math.floor(tiles[i]/3)*-100;

      div.style.backgroundImage=
      `url("images/${images[index]}")`;
      div.style.backgroundPosition=
      x+"px "+y+"px";
    }

    div.onclick=()=>move(i);
    puzzle.appendChild(div);
  }
}

function move(i){
  let row=Math.floor(i/3);
  let col=i%3;
  let erow=Math.floor(empty/3);
  let ecol=empty%3;

  let valid=
  (row===erow && Math.abs(col-ecol)===1)||
  (col===ecol && Math.abs(row-erow)===1);

  if(valid){
    [tiles[i],tiles[empty]]=[tiles[empty],tiles[i]];
    empty=i;
    draw();
  }
}

function shuffle(){
  for(let i=0;i<100;i++){
    let r=Math.floor(Math.random()*9);
    move(r);
  }
}

function nextImage(){
  index=(index+1)%images.length;
  window.location.href="puzzle.html?index="+index;
}

function prevImage(){
  index=(index-1+images.length)%images.length;
  window.location.href="puzzle.html?index="+index;
}

function goBack(){
  window.location.href="index.html";
}

shuffle();
draw();

</script>

</body>
</html>
